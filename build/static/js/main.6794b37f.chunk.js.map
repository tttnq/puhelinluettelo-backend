{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","newPerson","put","delete","Filter","onChange","PersonForm","props","onSubmit","handleNameChange","handleNumberChange","nameValue","numberValue","value","type","Persons","namesToShow","deletePerson","map","p","name","number","onClick","Notification","message","errorStatus","errorStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","persons","setPersons","newName","setNewName","newNum","setNewNum","filterValue","setFilterValue","error","notification","setNotification","useEffect","console","log","personService","initialPersons","timerReset","setTimeout","length","filter","toLowerCase","includes","event","target","preventDefault","personFound","find","window","confirm","updatedPerson","returnedPerson","catch","concat","errorMessage","person","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6794b37f.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request\r\n}\r\n\r\nexport default {getAll, create, update, remove}\r\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\n\nconst Filter = ({ onChange }) => {\n  return (\n    <div>\n      filter shown with <input onChange={onChange} />\n    </div>\n  );\n};\n\nconst PersonForm = (props) => {\n  const {\n    onSubmit,\n    handleNameChange,\n    handleNumberChange,\n    nameValue,\n    numberValue,\n  } = props;\n\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name: <input onChange={handleNameChange} value={nameValue} />\n      </div>\n      <div>\n        number: <input onChange={handleNumberChange} value={numberValue} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nconst Persons = ({ namesToShow, deletePerson }) => {\n  return (\n    <ul>\n      {namesToShow.map((p) => (\n        <li key={p.id}>\n          {p.name} {p.number} <button onClick={() => deletePerson(p.id)}>delete</button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst Notification = ({ message, errorStatus }) => {\n  if (message === null) {\n    return null;\n  }\n\n  const errorStyle = {\n    color: errorStatus ? \"red\" : \"green\",\n    background: \"lightgrey\",\n    fontSize: 20,\n    borderStyle: \"solid\",\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  };\n\n  return <div style={errorStyle}>{message}</div>;\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNum, setNewNum] = useState(\"\");\n  const [filterValue, setFilterValue] = useState(\"\");\n  const [notification, setNotification] = useState({\n    message: null,\n    error: null,\n  });\n\n  useEffect(() => {\n    console.log(\"effect\");\n    personService.getAll().then((initialPersons) => {\n      console.log(\"promise fulfilled\");\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const timerReset = () => {\n    setTimeout(() => {\n      setNotification({ message: null, error: false });\n    }, 5000);\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personFound = persons.find((p) => p.name === newName);\n    if (personFound) {\n      if (window.confirm( `${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const updatedPerson = { ...personFound, number: newNum };\n        personService\n          .update(updatedPerson.id, updatedPerson)\n          .then((returnedPerson) => {\n            console.log(returnedPerson);\n            setPersons(\n              persons.map((p) =>\n                p.id !== updatedPerson.id ? p : returnedPerson\n              )\n            );\n            setNotification({\n              message: `Updated ${updatedPerson.name}'s phone number`,\n              error: false,\n            });\n            timerReset()\n          })\n          .catch((error) => {\n            console.log(error)\n            setPersons(persons.filter((p) => p.id !== updatedPerson.id));\n            setNotification({\n              message: `Information of ${updatedPerson.name} has already been removed from server`,\n              error: true,\n            });\n            timerReset()\n          });\n      }\n    } else {\n      const newPerson = {\n        name: newName,\n        number: newNum,\n      };\n      personService\n        .create(newPerson)\n        .then((returnedPerson) => {\n          setPersons(persons.concat(returnedPerson));\n          console.log(returnedPerson);\n          setNotification({ message: `Added ${newPerson.name}`, error: false });\n          timerReset()\n        })\n        .catch(error => {\n          console.log(error.response.data)\n          const errorMessage = error.response.data.error\n          setNotification({message: errorMessage, error: true})\n          timerReset()\n        })\n    }\n\n    setNewName(\"\");\n    setNewNum(\"\");\n  };\n\n  const deletePerson = (id) => {\n    const person = persons.find((p) => p.id === id);\n\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      personService.remove(person.id).then(() => {\n        setPersons(persons.filter((p) => p.id !== person.id));\n        setNotification({ message: `Deleted ${person.name}`, error: false });\n        timerReset()\n      });\n    }\n  };\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value);\n    setNewNum(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value);\n    setFilterValue(event.target.value);\n  };\n\n  const namesToShow =\n    filterValue.length === 0\n      ? persons\n      : persons.filter((p) =>\n          p.name.toLowerCase().includes(filterValue.toLowerCase())\n        );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        message={notification.message}\n        errorStatus={notification.error}\n      />\n      <Filter onChange={handleFilterChange} />\n      <h2>add a new</h2>\n      <PersonForm\n        onSubmit={addPerson}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        nameValue={newName}\n        numberValue={newNum}\n      />\n      <h2>Numbers</h2>\n      <Persons namesToShow={namesToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}